* 给canvas设置宽高只能通过width属性和height属性，不能使用style属性进行设置，当然微信小程序中是可以的。

* 绘制1像素的线条，线条的粗细看起来明显大于1像素。
    - 线条粗是因像素都是整数，1像素在整数坐标绘制会被分成左右0.5像素，系统不识别0.5像素，就变成了左边1像素，右边1像素，于是边框就变成了2像素。
    - 解决方案：坐标位置增加0.5像素。
    - 问题本质：绘制奇数像素的线条会模糊，如果移动0.5，则绘制偶数像素的线条会模糊。
    - 上述解决方案会导致绘制偶数线条模糊，所以还请根据使用情形进行处理。

* 高倍屏，图片模糊。(这个其实不止canvas，只要是图片都会存在这个问题，一般解决方案是使用更高倍的图片。)
    - 解决方案：将canvas的width和height属性放大指定倍数进行绘制，然后再使用css3缩放(scale)将整个canvas元素或者其父元素缩小指定倍数，或者使用style设置宽高(canvas的style设置宽高，其实是对canvas的缩放)将整个canvas元素缩小到指定倍数。
    - 重点：ctx.scale(2, 2);需要将绘画环境也放大到指定倍数。
    - 放大到设备物理像素比(devicePixelRatio)的倍数即可。如果不放心的话，可以在设备物理像素比倍数的基础上再放大指定倍数。
    - 手机端，canvas自适应方法(px2remCanvas)封装时，不受影响，内部无需放大到指定倍数(canvas内部坐标点的自适应倍数还是要正常放大的)，正常封装即可。
    ```
    // 放大两倍
    canvas.setAttribute('width', width * 2);
    canvas.setAttribute('height', height * 2);
    // 还原
    canvas.style.width = width + 'px';
    canvas.style.height = height + 'px';
    // 不加这句话，绘图时的位置和宽高都要变化到指定的倍数。
    ctx.scale(2, 2);
    ```
    - 此方案解决不了1px的线条被绘制成了2px的问题。
    - 因微信小程序不支持对canvas进行缩放，所以针对微信小程序。我们只能画一张放大n倍的留着保存。再画一张正常的的留着展示（或者把放大n倍的转成图片或者base64展示）。
        - 细节1：放大n倍的那个需要隐藏，但是隐藏使用不能node，否则绘画无效。用定位可以。给一个很大的负值，例如-100000rpx。
        - 放大n倍之后，内部坐标其实可以按照设计图进行画，但是画之前使用ctx.scale(n, n);也放大对应倍数就可以保证画出来是正常的。

* canvas自适应2
    - 如果设计图是375。到了750宽度的屏上。那就是放大了2倍。首先canvas的宽高也要放大两倍。此时绘制时。有两种自适应方案。
    - 方案1：封装px2remCanvas方法。内部进行坐标宽高等的等比放大。
    - 方案2：使用ctx.scale(n, n);放大需要自适应的倍数即可。
    - 自适应放大了m倍。canvas本身放大了n倍(此处放大是为了保存的时候，图片更清晰)。那么```ctx.scale(n*m, n*m);```之后，即可按照设计图量取的尺寸正常绘画。

* font属性
    - 设置方式参考css。
    - 如果设置错误，或者设置了无效的值，则默认是：'10px sans-serif'。
    - 设置参数时，至少要有两个值。ctx.font = '40px Arial';
    - 否则都算是无效的设置，都会变成默认值：'10px sans-serif'。
    - 微信小程序中，字体大小不能为小数，否则也会变成默认值：'10px sans-serif'。

* 图片裁切思路 - 长方形图片裁切成正方形
    - 首先需要知道图片的宽高。
    - 然后找到中心点，从中心点坐标计算出正中间的正方形坐标。
    - 找到正确的坐标之后，使用ctx.drawImage(img, sx, sy, sw, sh, x, y, w, h)裁切出指定区域的图片即可。

* 函数封装：文字绘制（多行，单行，省略号），圆角矩形，阴影设置等。
    - https://github.com/zhouhuafei/zhf.canvas-api

#### canvas相关的工具包fabric
* IText类具备selected事件，但是官方文档并没有写。只写了下述事件。
```
event:changed
selection:changed
editing:entered
editing:exited
```
