# 什么是跨域访问
* 跨域访问，简单来说就是 A 网站的 javascript 代码试图访问 C网站，包括提交内容和获取内容。由于安全原因，跨域访问是被各大浏览器所默认禁止的。
* 跨域是浏览器才拥有的限制。
* 跨域，指的是浏览器不能执行其他网站的脚本。它是由浏览器的同源策略造成的，是浏览器施加的安全限制。 

# 怎样会导致跨域
* 域名不同
* 端口不同
* 协议不同

# 跨域访问导致的问题
* 跨域并不是说你不能把数据传递过去，其实你能把数据传递过去，也能收到响应，不过能收到，不代表能使用，network网络请求里是可以看到响应的，但是浏览器限制了xhr不处理，所以xhr是可以把数据传递过去，但是如果你想使用响应结果，是做不到的。
    - 过了几个月后，我又测试，发现服务器能收到响应。客户端浏览器的network中又看不到响应结果了。结果应是响应给了客户端浏览器，然后被浏览器拦截了。所以以上推论应是成立的。
    
# 跨域有哪些手段
* 后端设置接口允许跨域
* jsonp - 仅限GET请求
* 服务端代理 - 服务器之间进行通信
    - 独立域名配置，会遇到ajax跨子域的情况，直接使用nignx代理即可。
        - 例如我在pc.sbxx.top访问/h5/api/，只需把/h5/api/代理到127.0.0.1:5551/h5/api/，就可以进行跨子域调数据。
    - 独立域名配置pc和phone端需要共享session才能做单点登录，此时只需要在程序里设置domian的地方，给domain前面加个点即可。
* domain - 仅限子域和子域之间document.domain设置成顶级域名，这样就可以操作主域相同子域不同的iframe了。
    - 此时使用iframe内部的window进行ajax请求就可以进行ajax跨子域了。
    - 案例：```document.domain = 'sbxx.top';```。
* postMessage - 跨文档传输信息iframe
    - 需要验证url的合法性，否则任何人都可以请求了。
    - 此时使用iframe内部的window进行ajax请求就可以进行ajax跨主/子域了。

# form表单的submit提交没有跨域问题，但ajax提交存在跨域问题
* 浏览器的策略本质是：一个域名下面的JS，没有经过允许是不能读取另外一个域名的内容，但是浏览器不阻止你向另外一个域名发送请求。
* 所以form表单提交没有跨域问题，提交form表单到另外一个域名，原来页面是无法获取新页面的内容，或者说form提交后不需要返回，但是ajax是需要返回的。
* 而ajax是想要读取响应内容，浏览器是不允许你这么做的。
* 世界本无跨域，是浏览器不允许js访问别的域，但是浏览器却没有限制自己，img标签和script标签都是可以加载其他域的图片或者js文件。这不就是jsonp的跨域嘛，利用浏览器的历史兼容性。
* 浏览器的安全策略限制的是js脚本，并不限制src，form表单提交之类的请求。就是说form表单提交不存在安全问题，ajax提交跨域存在安全问题。
