> http://www.ruanyifeng.com/blog/2015/04/tail-call.html

## 尾调用
> 尾调用的概念非常简单，一句话就能说清楚，就是指某个函数的最后一步是调用另一个函数。
* 以下都是尾调用
```
function f(x){
  return g(x);
}
```
```
function f(x) {
  if (x > 0) {
    return m(x);
  }
  return n(x);
}
```
* 以下都不是尾调用
```
function f(x){
  let y = g(x);
  return y;
}
```
```
function f(x){
  return g(x) + 1;
}
```

## 尾递归
> 函数调用自身，称为递归。如果尾调用自身，就称为尾递归。
* 递归
```
function factorial(n) {
  if (n === 1) return 1;
  return n * factorial(n - 1);
}

factorial(5) // 120
```
* 尾递归
```
function factorial(n, total) {
  if (n === 1) return total;
  return factorial(n - 1, n * total);
}

factorial(5, 1) // 120
```

## 尾递归改写1 - 两个函数
```javascript
function tailFactorial(n, total) {
  if (n === 1) return total;
  return tailFactorial(n - 1, n * total);
}

function factorial(n) {
  return tailFactorial(n, 1);
}

factorial(5) // 120
```

## 尾递归改写2 - es6
```javascript
function factorial(n, total = 1) {
  if (n === 1) return total;
  return factorial(n - 1, n * total);
}

factorial(5) // 120
```

## 尾递归改写3 - 函数柯里化
> 函数柯里化就是把接收多个参数的函数转变为接收一个单一参数的函数，并且返回接收余下参数的函数。
```javascript
function currying(fn, n) {
  return function (m) {
    return fn(m, n);
  };
}

function tailFactorial(n, total) {
  if (n === 1) return total;
  return tailFactorial(n - 1, n * total);
}

const factorial = currying(tailFactorial, 1);

factorial(5) // 120
```
