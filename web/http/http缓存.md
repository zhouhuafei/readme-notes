参考文章：https://segmentfault.com/a/1190000006689795

# Expires
* 优势和特点
    - 1、HTTP 1.0 产物，可以在HTTP 1.0和1.1中使用，简单易用。
    - 2、以时刻标识失效时间。
* 劣势和问题
    - 1、时间是由服务器发送的(UTC)，如果服务器时间和客户端时间存在不一致，可能会出现问题。
    - 2、存在版本问题，到期之前的修改客户端是不可知的。

# Cache-Control
* 优势和特点
    - 1、HTTP 1.1 产物，以时间间隔标识失效时间，解决了Expires服务器和客户端相对时间的问题。
    - 2、比Expires多了很多选项设置。
* 劣势和问题
    - 1、HTTP 1.1 才有的内容，不适用于HTTP 1.0 。
    - 2、存在版本问题，到期之前的修改客户端是不可知的。

# Last-Modified
* 优势和特点
    - 1、不存在版本问题，每次请求都会去服务器进行校验。服务器对比最后修改时间如果相同则返回304，不同返回200以及资源内容。
* 劣势和问题
    - 1、只要资源修改，无论内容是否发生实质性的变化，都会将该资源返回客户端。例如周期性重写，这种情况下该资源包含的数据实际上一样的。
    - 2、以时刻作为标识，无法识别一秒内进行多次修改的情况。
    - 3、某些服务器不能精确的得到文件的最后修改时间。

# ETag
* 优势和特点
    - 1、可以更加精确的判断资源是否被修改，可以识别一秒内多次修改的情况。
    - 2、不存在版本问题，每次请求都回去服务器进行校验。
* 劣势和问题
    - 1、计算ETag值需要性能损耗。
    - 2、分布式服务器存储的情况下，计算ETag的算法如果不一样，会导致浏览器从一台服务器上获得页面内容后到另外一台服务器上进行验证时发现ETag不匹配的情况。

# 缓存优先级
* 强缓存和对比缓存(也叫协商缓存)同时存在，如果强缓存还在生效期则强制缓存覆盖对比缓存，对比缓存不生效；如果强缓存不在有效期，对比缓存生效。即：强缓存优先级 > 对比缓存优先级。
* 强缓存 Expires和Cache-Control同时存在时，则Cache-Control会覆盖Expires，Expires无论有没有过期，都无效。 即：Cache-Control优先级 > Expires优先级。
* 对比缓存 对比缓存Last-Modified和Etag同时存在时，则Etag会覆盖Last-Modified，Last-Modified不会生效。即：ETag优先级 > Last-Modified优先级。

# 强缓存
强缓存：只要请求了一次，在有效时间内，不会再请求服务器（请求都不会发起），直接从浏览器本地缓存中获取资源。
* 状态码：```200 OK (from memory cache)```。

# 对比缓存
对比缓存：无论是否变化，是否过期都会发起请求，如果内容没过期，直接返回304，从浏览器缓存中拉取文件，否则直接返回更新后的内容。
* 状态码：```304 Not Modified```。

# 配合使用
* 虽说存在优先级覆盖的问题，但是因为兼容性的原因，还是可以配合使用的。和css的优雅降级使用原理类似。
* 如果 Last-Modified 和 ETag 同时被使用，则要求它们的验证都必须通过才会返回304，若其中某个验证没通过，则服务器会按常规返回资源实体及200状态码。
