# 数据库都是串行的
* 接口并发，数据库串行。
* 就算是并发了10条请求，操作数据库的时候都是一条一条处理的。

# 接口并发2条，查有没有用户，没有的话就插入数据。
* 理论上应该是先查，后改，再查，再改。
* 但是实际上会先查，再查，再改，再改。
* 原因：接口并发，数据库先接受到查的指令，还没来得及接受改的指令，就又接受了另外一个查的指令。

# 数据库如何防止并发两次请求都提现成功？
* 先查询是解决不了的，因为两次查询可能查出来都有余额。
* 在更新数据库的时候，增加条件，增加有余额才处理的条件。

# 注册的时间，检测用户是否存在能防止并发么？
* 不能，因为并发时，两次查询可能都查不出结果。如此。插入数据库时，可能还是会出现两条记录。
    - 注：非并发场景下，查询能防止重复注册。但是并发场景下是防止不了。
* 解决方案：增加唯一主键。
