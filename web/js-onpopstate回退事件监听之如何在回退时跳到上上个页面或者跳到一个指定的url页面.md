# 问题
* 下单页，下单，跳转到，支付页，点击支付，跳转到，微信支付页，支付完成，跳转到支付结果页。
* 下单页 -> 支付页 -> 微信支付页 -> 支付结果页。
* 回退。又回到了微信支付页。这不是我们想要到结果。我们想要跳转到非微信支付页。跳转到我们自己的页面。
* 但是微信支付页不是我们可以控制的。所以不能在微信支付页使用replace进行跳转。所以只能曲线救国了。
```
// 当前页绑定事件处理函数
window.onpopstate = function (ev) {
    /*
    需求1(回退到一个指定页面)解法：
    建议1：不要使用window.location.href = url;进行跳转。否则回退一次是ulr页，再退就又回到支付结果页了。回退4，6，8无限偶数次都还是支付结果页。
    使用replace的话，会从历史记录里替换掉支付结果页(支付结果页丢失，无法通过回退回到支付结果页)，跳转的url页面在历史记录里会变成最新的记录。
    这样的话，从url页回退就直接回到了上上个页面(支付页)。丢失当前页面的体验。总比回退无限偶数次都还是支付结果页体验要好。
    建议2：在建议1的基础上进行跳转时，应该是跳往一个新的页面，别跳往上上个页面(支付页)。否则，在url页面回退一次是支付页，再回退一次还是支付页。
    如果非要回退到上上个页面(支付页)，请使用下面的需求2解法。如果是回退到上个页面(微信支付页)，则肯本无需监听，浏览器默认回退就是回退到上个页面(微信支付页)。
    总结：如果使用href不使用replace，回退会导致两个页面之间进行无限循环跳转。使用了replace之后，尽量往前跳一个新页面，不要往后跳老页面，否则体验会很怪异。
    */
    /*
    window.location.replace(url); // 跳转到指定的url页面。
    */

    /*
    需求2(回退到上上个页面的)解法：
    先阻止默认行为。然后直接跳回上上个页面即可。
    */
    /*
    ev.preventDefault(); // 先阻止掉默认的回退行为。
    window.history.go(-2); // 然后回退到上上个页面。
    */
};
// 添加并激活一个历史记录条目。如果不加这些，触发不了上面的事件。
history.pushState({state1: 'state data 1'}, 'title1', '#url1');
history.pushState({state2: 'state data 2'}, 'title2', '#url2');
history.pushState({state3: 'state data 3'}, 'title3', '#url3');
```
* 用途1、h5微信支付完，跳转到支付结果页。此时如果点击回退，不能让浏览器再次跳到微信支付页，此时，可以监听回退事件，当触发了回退，可以指定一个新的页面进行跳转或者回退到某个历史页面。
* 用途2、单页路由
