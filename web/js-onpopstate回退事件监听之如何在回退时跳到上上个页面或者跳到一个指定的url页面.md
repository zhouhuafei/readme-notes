# 问题
* 下单页，下单，跳转到，支付页，点击支付，跳转到，微信支付页，支付完成，跳转到支付结果页。
* 下单页 -> 支付页 -> 微信支付页 -> 支付结果页。
* 回退。又回到了微信支付页。这不是我们想要到结果。我们想要跳转到非微信支付页。跳转到我们自己的页面。
* 但是微信支付页不是我们可以控制的。所以不能在微信支付页使用replace进行跳转。所以只能曲线救国了。
```
// 当前页绑定事件处理函数
window.onpopstate = function (ev) {
    /*
    需求1，往后跳，回退到支付页。
    错误解法：window.location.href = '支付页的url';
    错误原因：回退一次是支付页，再退就又回到支付结果页了。回退2，4，6，8无限偶数次都还是支付结果页。
    伪正确解法：window.location.replace('支付页的url');
    错误原因：回退一次是支付页，再退还是支付页。
    正确解法：先阻止默认行为。然后直接使用window.history.go(-2)跳回上上个页面即可。
    */
    /*
    ev.preventDefault(); // 先阻止掉浏览器的默认回退行为。
    window.history.go(-2); // 然后回退到上上个页面(支付页)。此时再点击前进会跳到微信支付页，但是这样的体验并不会感觉到怪异。
    */

    /*
    建议2，往前跳，跳到订单详情页。
    错误解法：window.location.replace('订单详情页的url');
    错误原因：回退一次是订单详情页，再退又会回到微信支付页。
    正确解法：window.location.href = '订单详情页的url';
    正确解法导致的问题：回退一次是订单详情页，再退会到支付结果页。回退2，4，6，8无限偶数次都还是支付结果页。这个问题无解。相对而言，此种解法算是最优解了。
    */
    /*
    window.location.href = url; // url是订单详情页，此时在订单详情页回退，会退回支付结果页，再回退又跳到订单详情页，这是正确的，目的为了防止跳回到微信支付页。如果往前跳时这里使用replace，则在订单详情页回退时，会直接回退到微信支付页。
    */
};
// 添加并激活一个历史记录条目。如果不加这些，触发不了上面的事件。
history.pushState({state1: 'state data 1'}, 'title1', '#url1');
history.pushState({state2: 'state data 2'}, 'title2', '#url2');
history.pushState({state3: 'state data 3'}, 'title3', '#url3');
```
* 用途1、h5微信支付完，跳转到支付结果页。此时如果点击回退，不能让浏览器再次跳到微信支付页，此时，可以监听回退事件，当触发了回退，可以指定一个新的页面进行跳转或者回退到某个历史页面。
* 用途2、单页路由
