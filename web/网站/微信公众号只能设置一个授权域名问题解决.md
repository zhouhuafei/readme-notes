# 微信公众号只能设置一个授权域名问题解决
> 原理：使用代理服务器进行域名代理。

![图片加载中...](./images/1.png)

# 步骤
* 0、申请代理服务器的app_key和app_secret。
* 1、拿app_key和app_secret和我们的回调地址打接口，拿代理服务器的token和微信的授权地址。
  - 微信的授权地址参数上绑定的回调地址是代理服务器域名的回调地址。
  - 代理服务器会记录我们的回调地址，等微信授权完毕，代理服务器会对我们回调地址进行回跳。
  - 此时的token还换取不到用户信息，因为还没进行微信授权。
* 2、拿到回调地址之后，跳入回调地址进行微信授权，因微信授权地址参数上的回调地址是代理服务器的回调地址，所以微信授权完会跳入代理服务器的回调地址并携带code。
* 3、代理服务器拿code换用户信息并存储。然后再跳入到我们的回调地址。
* 4、此时，我们在自己的项目中，用代理服务器的token，即可拿到用户信息。
* 5、把代理服务器的token给我们自己的后端，去换取我们项目自己的token。
