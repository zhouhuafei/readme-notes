# jwt怎么刷新token？
* token即将过期的前5分钟，带着尚未过期的token来换取新的token。并更新用户信息表里记录的登录戳来保证本次登录token的唯一性，并可以让老的token无效。
* 失效其实是假失效。token的验证还是可以通过的。不过登录戳的验证就通不过了。所以可以保证token的唯一性。
* 打了更新token的接口之后。客户端的token也要更新。

# 刷新token的细节
* 应该在请求成功且业务成功之后，然后判断是否快要过期了。如果快要过期了。就刷新token。刷新失败则提示token过期了。
    - 可能存在的问题：暂时无解。
    - 过期之前，如果客户端并发了两个请求。
    - 因每次刷新，都会改变登陆戳，让token过期。
    - 所以会导致后请求的那个会返回token无效。
* 登陆戳：
    - jsonwebtoken生成新token，老token如果还没过期，是可以继续使用的。
    - 所以使用登陆戳进行校验可以让老token验证通不过。
    - 登陆戳我是存在user表中的。每次登录都修改登陆戳。
    - 登陆戳也可以用来做单设备登录。
