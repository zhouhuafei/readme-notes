200和304
# 缓存304 Not Modified
* 先对服务器进行请求,服务器发现这个资源没有变,告诉你这个资源没有变,然后使用304缓存,服务器会从缓存中调用你要访问的内容。
# 200 OK (from diskcache) (from memory cache)
* 不对服务器进行请求,直接使用内存缓存
* 先缓存到磁盘,进程关闭,缓存依旧有效
* 再缓存到内存,进程关闭,缓存立即失效,失效之后下次进来,会去磁盘找缓存,找到之后会再次缓存到内存

# max-age是秒数
```
Cache-Control: public, max-age=31536000
```
* 使用nodejs的框架express设置这个缓存的时候是通过毫秒数设置的。
* 浏览器的响应头里显示出来是秒数。

# Cache-Control的特性 - 如果客户端是Chrome浏览器
* 如果是使用的自己的服务器，用nginx配置的Cache-Control。
  - 地址栏直接访问html，虽然响应头中有Cache-Control，但是只要是点了浏览器的刷新按钮，则缓存就不会有效。
    - 点击后退，再点击前进，才会出现，from disk cache，说明读取的是本地缓存。
    - 点了浏览器的刷新按钮，虽然html的缓存不会生效，但是html内引入的其他静态资源，缓存是有效的。
  - 地址栏直接访问html内引入的静态资源，虽然响应头中有Cache-Control，但是只要是点了浏览器的刷新按钮，则缓存就不会有效。
    - 点击后退，再点击前进，才会出现，from disk cache，说明读取的是本地缓存。
* 总结：缓存的机制和客户端有关，不同的客户端特性不一。
  - 上述是Chrome浏览器的特性。
  - Android或IOS客户端也许是可以调整缓存策略。
    - app内嵌h5，html的响应头上有Cache-Control。
    - 有人遇到过IOS页面可以正常加载，Android一直加载老页面的问题。
    - 不过我做来伊份app内嵌h5时，并没有遇到这种问题。
* 如果是使用的七牛，不管是html还是css亦或是js，只要文件被访问一次，就会一直被缓存。
  - 因为七牛自带cdn，文件被缓存到了七牛的cdn服务器上。
  - 即使强刷浏览器，删除七牛上的文件，更换七牛上的文件，都无用，缓存一直都在。
  - 除非你去七牛后台手动清除对应文件的缓存。或者给url上加个`?v=随机数`使之溯源。
  - 本地的from disk cache特性和上述一致，也是点击后退，再点击前进，才会出现，from disk cache，说明读取的是本地缓存。
