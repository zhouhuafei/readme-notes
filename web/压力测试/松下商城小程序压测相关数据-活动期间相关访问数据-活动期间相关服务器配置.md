> 松下商城小程序压测相关数据-活动期间相关访问数据-活动期间相关服务器配置

## 一个网段有多少个可用IP地址？
* 理论上来说一个网段有254个可用IP地址。0~255共计有256个IP地址。因0和255不可用。固一个网段共计有254个可用IP地址。

## 松下商城小程序压测工具
* https://github.com/metersphere/metersphere

## 日常期间 - 松下商城小程序配置明细
* 测试环境
  - 公网NAT网关出带宽上限：1000Mbps 最大并发连接数300万
  - 负载均衡CLB带宽上限：1024Mbps
  - 防火墙WAF带宽规格限制：按量付费 - 1133.33 / 50 Mbps - 30天内的上下行带宽峰值 / 当前规格值
  - 云服务器：4C/8G x N（K8S多节点部署、服务节点自动扩缩容）（2个网段、最多254 x 2个节点）
  - 云redis数据库：内存1GB 1个分片/每个分片1GB/1个副本
  - 主mysql云数据库：8C/32G x 1
  - 从mysql云数据库：4C/16G x 2
* 正式环境
  - 公网NAT网关出带宽上限：1000Mbps 最大并发连接数300万
  - 负载均衡CLB带宽上限：1024Mbps
  - 防火墙WAF带宽规格限制：按量付费 - 1133.33 / 50 Mbps - 30天内的上下行带宽峰值 / 当前规格值
  - 云服务器：4C/8G x N（K8S多节点部署、服务节点自动扩缩容）（4个网段、最多254 x 4个节点）
  - 云redis数据库：内存16GB 8个分片/每个分片2GB/1个副本
  - 主mysql云数据库：16C/64G x 1
  - 从mysql云数据库：8C/32G x 2
* 压测机器
  - 公网NAT网关出带宽上限：1000Mbps 最大并发连接数300万
  - 负载均衡CLB带宽上限：1024Mbps
  - 防火墙WAF带宽规格限制：按量付费 - 1133.33 / 50 Mbps - 30天内的上下行带宽峰值 / 当前规格值
  - 云服务器：4C/16G x 3

## 2023/06/13 - 正式环境 - 松下商城小程序压测数据
* https://docs.qq.com/sheet/DWHFqZllZQlNHU0pp?tab=BB08J2

## 2023/06/13 - 正式环境 - 松下商城小程序压测报告
* https://docs.qq.com/slide/DWFJMek9zc01VbkhC

## 2023/06/13 - 正式环境 - 松下商城小程序访问数据
* https://docs.qq.com/sheet/DWFlLSFFoYk9sUk1x?tab=BB08J2

## 2023/06/13 - 正式环境 - 松下商城小程序事故报告
* https://docs.qq.com/doc/DWERaTkhPU01TVWpC

## 2023/10/30 - 活动期间 - 正式环境 - 松下商城小程序配置明细 - 腾讯云
* 公网NAT网关出带宽上限：1000Mbps 最大并发连接数300万
* 负载均衡CLB带宽上限：1024Mbps 升级到 2048Mbps
* 防火墙WAF带宽规格限制：按量付费 - 1133.33 / 50 Mbps - 30天内的上下行带宽峰值 / 当前规格值
* 云服务器：4C/8G x N 升级到 8C/16G x N（K8S多节点部署、服务节点自动扩缩容）（4个网段升级为6个网段、最多254 x 6个节点）
  > 节点数增加的同时，要保障网段够用，要保障redis连接数够用（32万个），要保障mysql连接数够用（主10万个 x 1、从10万个 x 5），要保障MQ链接数够用（10万个）。
  - app:order-service-prod 日常2个初始节点 1.3W压测时40个节点 活动期间建议120个初始节点起
  - app:product-service-prod 日常2个初始节点 1.3W压测时40个节点 活动期间建议120个初始节点起
  - app:sales-service-prod 日常4个初始节点 1.3W压测时50个节点 活动期间建议150个初始节点起
  - app:system-service-prod 日常2个初始节点 1.3W压测时23个节点 活动期间建议69个初始节点起
  - app:user-service-prod 日常2个初始节点 1.3W压测时36个节点 活动期间建议108个初始节点起
* 云redis数据库：内存16GB 8个分片/每个分片2GB/1个副本 升级到 内存32GB 8个分片/每个分片4GB/2个副本（最大连接数32万个、最大网络吞吐37376Mb/s）
* 主mysql云数据库：16C/64G x 1 升级到 90C/720G x 1（最大连接数10万个 x 1）
* 从mysql云数据库：8C/32G x 2 升级到 90C/720G x 5（最大连接数10万个 x 5）
